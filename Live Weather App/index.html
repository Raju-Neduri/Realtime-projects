<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Live Weather Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary-color: #1a73e8;
        --secondary-color: #0d47a1;
        --glass-bg: rgba(255, 255, 255, 0.15);
        --glass-border: rgba(255, 255, 255, 0.2);
        --text-light: #ffffff;
        --text-dark: #1a237e;
        --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        /* Dramatic water, sunrise, and sunset effect: deep blue to gold */
        background: linear-gradient(
          120deg,
          #0a2342 0%,
          /* deep water */ #005976 20%,
          /* water blue */ #3151d1 45%,
          /* sky blue */ #a259c6 65%,
          /* magenta-violet */ #f09819 85%,
          /* sunrise gold */ #ffd600 100% /* bright yellow sun */
        );
        background-size: 300% 300%;
        animation: animatedGradient 16s ease-in-out infinite;
        position: relative;
        font-family: "Poppins", "Comfortaa", sans-serif;
        color: var(--text-light);
        min-height: 100vh;
        padding: 20px;
        overflow-x: hidden;
      }
      body::before {
        /* Glassy radial overlay for depth + animated shimmer */
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 0;
        pointer-events: none;
        background: radial-gradient(
            circle at 80% 10%,
            rgba(255, 214, 0, 0.22) 0%,
            rgba(255, 255, 255, 0.08) 40%,
            transparent 70%
          ),
          radial-gradient(
            circle at 60% 30%,
            rgba(255, 255, 255, 0.18) 0%,
            rgba(255, 255, 255, 0.08) 60%,
            transparent 100%
          ),
          radial-gradient(
            circle at 50% 100%,
            rgba(49, 81, 209, 0.18) 0%,
            transparent 70%
          ),
          repeating-radial-gradient(
            circle at 50% 100%,
            rgba(255, 255, 255, 0.08) 0,
            rgba(255, 255, 255, 0.01) 10px,
            transparent 30px,
            transparent 100px
          );
        mix-blend-mode: lighten;
        filter: blur(10px);
        animation: shimmerMove 12s linear infinite;
      }
      body::after {
        /* Animated sun glow and water reflection */
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
        z-index: 1;
        background: radial-gradient(
            circle at 85% 8%,
            rgba(255, 214, 0, 0.18) 0%,
            rgba(255, 214, 0, 0.08) 30%,
            transparent 60%
          ),
          radial-gradient(
            ellipse at 50% 100%,
            rgba(49, 81, 209, 0.13) 0%,
            rgba(10, 35, 66, 0.18) 40%,
            transparent 80%
          );
        opacity: 0.85;
        animation: sunGlow 10s ease-in-out infinite;
      }
      @keyframes animatedGradient {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }
      @keyframes shimmerMove {
        0% {
          background-position: 60% 30%, 60% 30%, 50% 100%, 50% 100%;
        }
        50% {
          background-position: 80% 10%, 70% 40%, 55% 90%, 55% 90%;
        }
        100% {
          background-position: 60% 30%, 60% 30%, 50% 100%, 50% 100%;
        }
      }
      @keyframes sunGlow {
        0%,
        100% {
          opacity: 0.85;
        }
        50% {
          opacity: 1;
        }
      }

      /* Search Bar */
      .searchBar {
        height: 10vh;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
      }

      .searchBarParentDiv {
        width: 100%;
        max-width: 600px;
        height: fit-content;
        position: relative;
        box-shadow: 0 4px 24px 0 rgba(49, 81, 209, 0.18),
          0 1.5px 8px 0 rgba(49, 81, 209, 0.13),
          0 0 16px 0 rgba(255, 214, 0, 0.13);
        border: 2.5px solid rgba(255, 255, 255, 0.28);
        border-radius: 50px;
        background: linear-gradient(
          120deg,
          rgba(255, 255, 255, 0.22) 0%,
          rgba(255, 255, 255, 0.13) 100%
        );
        backdrop-filter: blur(18px) saturate(1.2);
        overflow: hidden;
      }

      .inputfield {
        width: 100%;
        border-radius: 50px;
        padding: 15px 25px;
        font-size: 1.1rem;
        border: none;
        background: rgba(255, 255, 255, 0.92);
        color: var(--text-dark);
        font-weight: 500;
        transition: box-shadow 0.3s, background 0.3s;
        box-shadow: 0 1.5px 8px 0 rgba(49, 81, 209, 0.1);
      }

      .inputfield:focus {
        background: #fff;
        box-shadow: 0 4px 25px rgba(49, 81, 209, 0.18);
      }

      .inputfield::placeholder {
        font-size: 1rem;
        font-weight: 500;
        color: #666;
      }

      /* Enhanced search icon gradient to match new theme */
      .searchIcon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        width: 35px;
        height: 35px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(
          135deg,
          #ffd600 0%,
          #f09819 40%,
          #5db8f8 100%
        );
        border: 2.5px solid #fff;
        border-radius: 50%;
        padding: 8px;
        transition: background 0.3s, box-shadow 0.3s, transform 0.3s;
        box-shadow: 0 2px 12px 0 rgba(49, 81, 209, 0.22),
          0 0 8px 0 rgba(255, 214, 0, 0.18);
      }

      .searchIcon:hover {
        background: linear-gradient(135deg, #5db8f8 0%, #ffd600 100%);
        box-shadow: 0 4px 16px 0 rgba(49, 81, 209, 0.28),
          0 0 16px 0 rgba(255, 214, 0, 0.22);
        transform: translateY(-50%) scale(1.12);
      }

      /* Main content layout */
      .mainContentParentDiv {
        min-height: 0;
        height: auto;
        display: flex;
        flex-direction: row;
        gap: 25px;
        padding: 20px;
      }

      /* Left panel */
      .leftDiv {
        width: 30%;
        height: 100%;
        display: flex;
        flex-direction: column;
        gap: 25px;
      }

      .leftChild {
        background: rgba(255, 255, 255, 0.18);
        width: 100%;
        border-radius: 28px;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.22),
          0 1.5px 8px 0 rgba(49, 81, 209, 0.13),
          0 0 24px 0 rgba(255, 214, 0, 0.08);
        backdrop-filter: blur(22px) saturate(1.3);
        padding: 25px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        border: 1.5px solid rgba(255, 255, 255, 0.28);
        transition: box-shadow 0.3s, transform 0.3s, background 0.3s;
      }

      .leftChild:hover {
        background: linear-gradient(
          120deg,
          rgba(255, 255, 255, 0.28) 0%,
          rgba(255, 255, 255, 0.18) 100%
        );
        box-shadow: 0 12px 36px 0 rgba(31, 38, 135, 0.28),
          0 2.5px 12px 0 rgba(49, 81, 209, 0.18),
          0 0 32px 0 rgba(255, 214, 0, 0.13);
        transform: translateY(-2px) scale(1.018);
      }

      .currentTempDiv {
        height: 45%;
      }

      .nextFiveDays {
        height: 55%;
      }

      .currentTempDiv h6 {
        font-size: 1.2rem;
        margin-bottom: 5px;
        font-weight: 500;
      }

      #cityName {
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 10px;
        letter-spacing: -0.5px;
        text-shadow: 0 2px 12px rgba(49, 81, 209, 0.18),
          0 1px 2px rgba(0, 0, 0, 0.1);
      }

      #cityTemp {
        font-size: 3.5rem;
        font-weight: 700;
        margin: 10px 0;
        line-height: 1;
        color: #fff;
        text-shadow: 0 0 16px #539dad, 0 2px 12px #3151d1;
      }

      #skyDesc {
        font-size: 1.4rem;
        font-weight: 500;
        margin-bottom: 15px;
      }

      .line {
        border-top: 1px solid rgba(255, 255, 255, 0.3);
        margin: 15px 0;
      }

      .date-time-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .date-time-item {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .date-time-item img {
        filter: brightness(0) invert(1);
      }

      .date-time-item h6 {
        font-size: 1.1rem;
        font-weight: 500;
      }

      /* Forecast section */
      #comingFiveDaysTitle {
        font-size: 1.4rem;
        font-weight: 600;
        margin-bottom: 15px;
      }

      #forecastContainer {
        display: flex;
        flex-direction: column;
        gap: 15px;
        overflow-y: auto;
        height: calc(100% - 40px);
        padding-right: 10px;
      }

      .forecastRow {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 12px 20px;
        transition: all 0.3s ease;
      }

      .forecastRow:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
      }

      .forecast1 {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .forecast1 img {
        width: 35px;
      }

      .forecast1 h6 {
        font-size: 1.2rem;
        font-weight: 600;
        min-width: 90px;
      }

      .forecast2 {
        display: flex;
        flex-direction: column;
        gap: 5px;
        text-align: right;
      }

      .forecast2 h6 {
        font-size: 1rem;
        font-weight: 500;
      }

      /* Right panel */
      .rightDiv {
        width: 70%;
        height: 100%;
        display: flex;
        flex-direction: column;
        gap: 25px;
      }

      .rightRow {
        width: 100%;
        display: flex;
        gap: 25px;
      }

      .rowOne {
        height: 20%;
        justify-content: space-between;
      }

      .rowTwo {
        height: 35%;
      }

      .rowThree {
        height: 45%;
        flex-direction: column;
      }

      /* Metrics */
      .extraMetric {
        flex: 1;
        background: rgba(255, 255, 255, 0.18);
        border-radius: 28px;
        backdrop-filter: blur(18px) saturate(1.2);
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 20px;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.18),
          0 1.5px 8px 0 rgba(49, 81, 209, 0.1),
          0 0 24px 0 rgba(255, 214, 0, 0.08);
        border: 1.5px solid rgba(255, 255, 255, 0.28);
        min-width: 200px;
        transition: box-shadow 0.3s, transform 0.3s, background 0.3s;
      }

      .extraMetric:hover {
        background: rgba(255, 255, 255, 0.23);
        box-shadow: 0 12px 36px 0 rgba(31, 38, 135, 0.22),
          0 2.5px 12px 0 rgba(49, 81, 209, 0.13);
        transform: translateY(-2px) scale(1.015);
      }

      .extraMetric img {
        width: 45px;
        height: 45px;
        filter: brightness(0) invert(1);
      }

      .metricText h6:first-child {
        font-size: 1rem;
        font-weight: 500;
        opacity: 0.9;
        margin-bottom: 5px;
      }

      .metricText h6:last-child {
        font-size: 1.5rem;
        font-weight: 600;
      }

      /* AQI & Sunrise */
      .rowTwoDiv {
        flex: 1;
        background: rgba(255, 255, 255, 0.18);
        border-radius: 28px;
        backdrop-filter: blur(18px) saturate(1.2);
        padding: 25px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.18),
          0 1.5px 8px 0 rgba(49, 81, 209, 0.1);
        border: 1.5px solid rgba(255, 255, 255, 0.28);
      }
      .sunRise {
        display: flex;
        justify-content: space-between;
      }

      .rowTwoDiv h5 {
        font-size: 1.4rem;
        font-weight: 600;
        margin-bottom: 4px;
      }

      .aqiContainer {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 32px;
        width: 100%;
      }

      .aqiIconWrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        min-width: 60px;
        width: 60px;
      }

      .aqiIconWrapper img {
        width: 48px;
        height: 48px;
        filter: brightness(0) invert(1);
      }

      .aqiMetricsGrid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-template-rows: repeat(2, 1fr);
        gap: 12px 32px;
        width: 100%;
        max-width: 320px;
      }

      .aqiMetric {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: none;
        padding: 0;
        width: 100%;
        min-width: 0;
        text-align: center;
      }

      .aqiMetric h6:first-child {
        font-size: 1rem;
        font-weight: 500;
        opacity: 0.9;
        margin-bottom: 5px;
      }

      .aqiMetric h6:last-child {
        font-size: 1.5rem;
        font-weight: 600;
      }

      @media (max-width: 769px) {
        .aqiContainer {
          flex-direction: column;
          align-items: center;
          justify-content: flex-start;
          gap: 10px;
          width: 100%;
        }

        .aqiIconWrapper {
          width: 100%;
          margin-bottom: 8px;
          justify-content: center;
        }

        .aqiMetricsGrid {
          width: 100%;
          max-width: 320px;
          grid-template-columns: 1fr 1fr;
          grid-template-rows: 1fr 1fr;
          gap: 10px 16px;
          justify-items: center;
        }

        .aqiMetric {
          width: 100%;
          min-width: 0;
          text-align: center;
        }
      }

      .riseandset {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 6px;
      }

      .sunriseDiv,
      .sunsetDiv {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .sunriseDiv img,
      .sunsetDiv img {
        width: 75px;
      }
      .sunRise {
        display: flex;
        justify-content: space-evenly;
      }
      .sunTimeText h6 {
        font-size: 1.1rem;
        font-weight: 500;
        opacity: 0.9;
      }

      .sunTimeText h5 {
        font-size: 1.8rem;
        font-weight: 600;
      }

      /* Hourly forecast */
      .rowThree h5 {
        font-size: 1.4rem;
        font-weight: 600;
        margin-bottom: 15px;
      }

      #todayTempContainer {
        display: flex;
        gap: 20px;
        overflow-x: auto;
        padding: 10px 5px 20px;
        scrollbar-width: thin;
        scrollbar-color: var(--primary-color) transparent;
      }

      #todayTempContainer::-webkit-scrollbar {
        height: 8px;
      }

      #todayTempContainer::-webkit-scrollbar-thumb {
        background: var(--primary-color);
        border-radius: 4px;
      }

      .todayTemp {
        min-width: 120px;
        background: rgba(255, 255, 255, 0.18);
        border-radius: 28px;
        backdrop-filter: blur(18px) saturate(1.2);
        padding: 20px 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.18),
          0 1.5px 8px 0 rgba(49, 81, 209, 0.1);
        border: 1.5px solid rgba(255, 255, 255, 0.28);
      }

      .todayTemp h6 {
        font-size: 1.1rem;
        font-weight: 500;
      }

      .todayTemp img {
        width: 50px;
        filter: brightness(0) invert(1);
      }

      .todayTemp h5 {
        font-size: 1.6rem;
        font-weight: 600;
        color: #fff;
        text-shadow: 0 0 16px #539dad, 0 2px 12px #3151d1;
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .mainContentParentDiv {
          height: auto;
          flex-direction: column;
        }

        .leftDiv,
        .rightDiv {
          width: 100%;
        }

        .leftDiv {
          flex-direction: row;
          height: auto;
          gap: 20px;
        }

        .currentTempDiv,
        .nextFiveDays {
          height: 100%;
          flex: 1;
        }

        .rowOne {
          flex-wrap: wrap;
        }

        .extraMetric {
          min-width: calc(50% - 15px);
          margin-bottom: 15px;
        }
      }

      @media (max-width: 992px) {
        .leftDiv {
          flex-direction: column;
        }

        .rowTwo {
          flex-direction: column;
          height: auto;
        }

        .rowTwoDiv {
          width: 100%;
          margin-bottom: 20px;
        }

        .riseandset {
          flex-direction: column;
          align-items: flex-start;
          gap: 30px;
        }

        .sunriseDiv,
        .sunsetDiv {
          width: 100%;
          justify-content: center;
          margin-top: 20px;
        }

        .riseandset {
          gap: 10px;
        }
      }

      @media (max-width: 768px) {
        body {
          padding: 15px;
        }

        .searchBar {
          height: auto;
          margin-bottom: 15px;
        }

        .inputfield {
          padding: 12px 20px;
          font-size: 1rem;
        }

        .mainContentParentDiv {
          padding: 0;
        }

        .leftDiv {
          gap: 15px;
        }

        .leftChild {
          padding: 20px;
        }

        #cityName {
          font-size: 1.8rem;
        }

        #cityTemp {
          font-size: 2.8rem;
        }

        #skyDesc {
          font-size: 1.2rem;
        }

        .date-time-item h6 {
          font-size: 1rem;
        }

        .extraMetric {
          min-width: 100%;
        }

        .aqiContainer {
          flex-wrap: wrap;
          gap: 15px;
        }

        .aqiMetric {
          min-width: calc(50% - 15px);
        }

        .todayTemp {
          min-width: 110px;
        }
      }

      @media (max-width: 480px) {
        .inputfield {
          padding: 10px 18px;
          font-size: 0.95rem;
        }
        .searchIcon {
          width: 32px;
          height: 32px;
          padding: 7px;
        }

        #cityName {
          font-size: 1.6rem;
        }

        #cityTemp {
          font-size: 2.5rem;
        }

        .forecastRow {
          padding: 10px 15px;
        }

        .forecast1 h6 {
          font-size: 1rem;
          min-width: 70px;
        }

        .sunTimeText h5 {
          font-size: 1.5rem;
        }

        .todayTemp {
          min-width: 100px;
          padding: 15px 10px;
        }

        .todayTemp h5 {
          font-size: 1.4rem;
        }

        .rowTwoDiv.sunRise {
          padding: 10px 4px;
        }
        .rowTwoDiv.sunRise > div:first-child {
          margin-bottom: 0;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        .riseandset {
          margin-top: 15px;
          margin-bottom: 15px;
        }
        .sunrisetitle {
          padding: 10px;
        }
      }

      /* Loading spinner */
      .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 4px solid var(--text-light);
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 20px auto;
        display: none;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Error message */
      .error-message {
        background: linear-gradient(90deg, #ff512f 0%, #f09819 100%);
        border-radius: 16px;
        padding: 18px 24px;
        text-align: center;
        margin: 24px 0 18px 0;
        display: none;
        color: #fff;
        font-size: 1.15rem;
        font-weight: 600;
        letter-spacing: 0.5px;
        box-shadow: 0 4px 24px 0 rgba(255, 88, 88, 0.18),
          0 1.5px 8px 0 rgba(240, 152, 25, 0.12),
          0 0 16px 0 rgba(255, 214, 0, 0.13);
        border: 2.5px solid #ffd600;
        position: relative;
        z-index: 10;
        animation: errorPop 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55),
          errorPulse 1.5s infinite alternate;
        overflow: hidden;
      }
      .error-message::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.08);
        pointer-events: none;
        z-index: 1;
      }
      @keyframes errorPulse {
        0% {
          box-shadow: 0 0 0 0 #ffd60044;
          border-color: #ffd600;
        }
        100% {
          box-shadow: 0 0 16px 8px #ffd60055;
          border-color: #ff512f;
        }
      }

      /* Footer ripple effect */
      footer {
        position: relative;
        overflow: visible;
      }
      footer::after {
        content: "";
        position: absolute;
        left: 50%;
        bottom: -8px;
        transform: translateX(-50%);
        width: 120px;
        height: 18px;
        background: radial-gradient(
          ellipse at center,
          rgba(255, 255, 255, 0.18) 0%,
          rgba(49, 81, 209, 0.13) 60%,
          transparent 100%
        );
        opacity: 0.7;
        filter: blur(2px);
        animation: ripple 2.5s infinite linear;
        z-index: 0;
      }
      @keyframes ripple {
        0% {
          width: 120px;
          opacity: 0.7;
        }
        50% {
          width: 160px;
          opacity: 0.9;
        }
        100% {
          width: 120px;
          opacity: 0.7;
        }
      }

      /* Weather icons */
      .weather-icon {
        filter: brightness(0) invert(1);
      }

      .rowTwoDiv.sunRise h5 {
        margin-bottom: 4px;
      }

      .riseandset {
        gap: 6px;
      }

      @media (max-width: 992px) {
        .riseandset {
          gap: 10px;
        }
      }

      .rowTwoDiv.AQI h5 {
        margin-bottom: 18px;
      }
    </style>
  </head>

  <body>
    <div class="searchBar">
      <div class="searchBarParentDiv">
        <input
          type="text"
          class="inputfield"
          placeholder="Enter city name..."
          id="cityInput"
        />
        <img
          src="https://cdn-icons-png.flaticon.com/512/3917/3917132.png"
          alt="Search"
          class="searchIcon"
          onclick="fetchData()"
        />
      </div>
    </div>

    <div class="spinner" id="spinner"></div>
    <div class="error-message" id="errorMessage">
      City not found. Please try another location.
    </div>

    <div class="mainContentParentDiv d-flex">
      <div class="leftDiv">
        <div class="currentTempDiv leftChild p-3 d-flex flex-column">
          <h6 class="m-0" id="currentDate">Monday, June 3, 2025</h6>
          <h1 class="m-0 mt-2" id="cityName">New York</h1>
          <div class="d-flex align-items-center mt-1">
            <img
              src="https://cdn-icons-png.flaticon.com/512/6974/6974833.png"
              alt="Weather icon"
              width="80"
              class="weather-icon me-3"
              id="weatherIcon"
            />
            <div>
              <h1 class="m-0"><span id="cityTemp">22</span> &deg;C</h1>
              <h3 class="m-0" id="skyDesc">Partly Cloudy</h3>
            </div>
          </div>
          <hr class="line my-3" />
          <div class="date-time-container">
            <div class="date-time-item">
              <img
                src="https://cdn-icons-png.flaticon.com/512/747/747310.png"
                alt="Calendar"
                width="25"
              />
              <h6 class="m-0" id="date">June 3, 2025</h6>
            </div>
            <div class="date-time-item">
              <img
                src="https://cdn-icons-png.flaticon.com/512/2088/2088195.png"
                alt="Time"
                width="25"
              />
              <h6 class="m-0" id="time">10:30 AM</h6>
            </div>
          </div>
        </div>

        <div class="nextFiveDays leftChild p-3 d-flex flex-column">
          <h4 class="m-0 mb-3" id="comingFiveDaysTitle">5-Day Forecast</h4>
          <div id="forecastContainer" class="d-flex flex-column">
            <div class="forecastRow">
              <div class="forecast1 d-flex align-items-center">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/6974/6974833.png"
                  alt="Weather"
                  width="35"
                />
                <h6 class="m-0">22 &deg;C</h6>
              </div>
              <div class="forecast2">
                <h6 class="m-0">Tuesday</h6>
                <h6 class="m-0">June 4</h6>
              </div>
            </div>
            <div class="forecastRow">
              <div class="forecast1 d-flex align-items-center">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/414/414927.png"
                  alt="Weather"
                  width="35"
                />
                <h6 class="m-0">24 &deg;C</h6>
              </div>
              <div class="forecast2">
                <h6 class="m-0">Wednesday</h6>
                <h6 class="m-0">June 5</h6>
              </div>
            </div>
            <div class="forecastRow">
              <div class="forecast1 d-flex align-items-center">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/6408/6408981.png"
                  alt="Weather"
                  width="35"
                />
                <h6 class="m-0">19 &deg;C</h6>
              </div>
              <div class="forecast2">
                <h6 class="m-0">Thursday</h6>
                <h6 class="m-0">June 6</h6>
              </div>
            </div>
            <div class="forecastRow">
              <div class="forecast1 d-flex align-items-center">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/6408/6408981.png"
                  alt="Weather"
                  width="35"
                />
                <h6 class="m-0">20 &deg;C</h6>
              </div>
              <div class="forecast2">
                <h6 class="m-0">Friday</h6>
                <h6 class="m-0">June 7</h6>
              </div>
            </div>
            <div class="forecastRow">
              <div class="forecast1 d-flex align-items-center">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/414/414927.png"
                  alt="Weather"
                  width="35"
                />
                <h6 class="m-0">23 &deg;C</h6>
              </div>
              <div class="forecast2">
                <h6 class="m-0">Saturday</h6>
                <h6 class="m-0">June 8</h6>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="rightDiv">
        <div class="rightRow rowOne d-flex">
          <div class="extraMetric d-flex">
            <img
              src="https://cdn-icons-png.flaticon.com/512/3313/3313888.png"
              alt="Humidity"
              width="45"
            />
            <div class="metricText">
              <h6 class="m-0">Humidity</h6>
              <h6 class="m-0" id="humidity">65%</h6>
            </div>
          </div>
          <div class="extraMetric d-flex">
            <img
              src="https://cdn-icons-png.flaticon.com/512/172/172928.png"
              alt="Pressure"
              width="45"
            />
            <div class="metricText">
              <h6 class="m-0">Pressure</h6>
              <h6 class="m-0" id="pressure">1013 hPa</h6>
            </div>
          </div>
          <div class="extraMetric d-flex">
            <img
              src="https://cdn-icons-png.flaticon.com/512/411/411712.png"
              alt="Feels Like"
              width="45"
            />
            <div class="metricText">
              <h6 class="m-0">Feels like</h6>
              <h6 class="m-0" id="feelsLike">24 &deg;C</h6>
            </div>
          </div>
          <div class="extraMetric d-flex">
            <img
              src="https://cdn-icons-png.flaticon.com/512/709/709612.png"
              alt="Visibility"
              width="45"
            />
            <div class="metricText">
              <h6 class="m-0">Visibility</h6>
              <h6 class="m-0" id="visiblity">10 km</h6>
            </div>
          </div>
        </div>

        <div class="rightRow rowTwo d-flex">
          <div class="rowTwoDiv AQI p-3 d-flex flex-column">
            <h5>Air Quality Index</h5>
            <div class="aqiContainer">
              <div class="aqiIconWrapper">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/1585/1585269.png"
                  alt="Wind"
                />
              </div>
              <div class="aqiMetricsGrid">
                <div class="aqiMetric">
                  <h6 id="co">CO</h6>
                  <h6 id="coValue">205</h6>
                </div>
                <div class="aqiMetric">
                  <h6 id="so2">SO2</h6>
                  <h6 id="so2Value">12</h6>
                </div>
                <div class="aqiMetric">
                  <h6 id="no2">NO2</h6>
                  <h6 id="no2Value">28</h6>
                </div>
                <div class="aqiMetric">
                  <h6 id="o3">O3</h6>
                  <h6 id="o3Value">64</h6>
                </div>
              </div>
            </div>
          </div>

          <div class="rowTwoDiv sunRise">
            <div class="sunrisetitle">
              <h5>Sunrise & Sunset</h5>
            </div>
            <div class="riseandset">
              <div class="sunriseDiv d-flex align-items-center">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/869/869869.png"
                  alt="Sunrise"
                  width="75"
                />
                <div class="sunTimeText">
                  <h6 class="m-0">Sunrise</h6>
                  <h5 class="m-0" id="sunriseTime">5:42 AM</h5>
                </div>
              </div>

              <div class="sunsetDiv d-flex align-items-center">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/1146/1146869.png"
                  alt="Sunset"
                  width="65"
                />
                <div class="sunTimeText">
                  <h6 class="m-0">Sunset</h6>
                  <h5 class="m-0" id="sunsetTime">8:19 PM</h5>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="rightRow rowThree d-flex flex-column">
          <h5>Today's Forecast</h5>
          <div class="d-flex todayTempParentDiv" id="todayTempContainer">
            <div class="todayTemp">
              <h6 class="m-0">Now</h6>
              <img
                src="https://cdn-icons-png.flaticon.com/512/414/414927.png"
                alt="Weather"
                width="50"
              />
              <h5>22&deg;C</h5>
            </div>
            <div class="todayTemp">
              <h6 class="m-0">1 PM</h6>
              <img
                src="https://cdn-icons-png.flaticon.com/512/414/414927.png"
                alt="Weather"
                width="50"
              />
              <h5>24&deg;C</h5>
            </div>
            <div class="todayTemp">
              <h6 class="m-0">3 PM</h6>
              <img
                src="https://cdn-icons-png.flaticon.com/512/414/414927.png"
                alt="Weather"
                width="50"
              />
              <h5>25&deg;C</h5>
            </div>
            <div class="todayTemp">
              <h6 class="m-0">5 PM</h6>
              <img
                src="https://cdn-icons-png.flaticon.com/512/6974/6974833.png"
                alt="Weather"
                width="50"
              />
              <h5>23&deg;C</h5>
            </div>
            <div class="todayTemp">
              <h6 class="m-0">7 PM</h6>
              <img
                src="https://cdn-icons-png.flaticon.com/512/6974/6974833.png"
                alt="Weather"
                width="50"
              />
              <h5>21&deg;C</h5>
            </div>
            <div class="todayTemp">
              <h6 class="m-0">9 PM</h6>
              <img
                src="https://cdn-icons-png.flaticon.com/512/6408/6408981.png"
                alt="Weather"
                width="50"
              />
              <h5>19&deg;C</h5>
            </div>
            <div class="todayTemp">
              <h6 class="m-0">11 PM</h6>
              <img
                src="https://cdn-icons-png.flaticon.com/512/6408/6408981.png"
                alt="Weather"
                width="50"
              />
              <h5>18&deg;C</h5>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer
      style="
        width: 100%;
        text-align: center;
        margin-top: 40px;
        color: #fff;
        opacity: 0.85;
        font-size: 1.05rem;
        letter-spacing: 0.5px;
        z-index: 2;
        position: relative;
      "
    >
      &copy; RajkingNeduri
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
      integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>

    <script>
      // Initialize with sample data
      document.addEventListener("DOMContentLoaded", function () {
        // Set current date and time
        const now = new Date();
        const options = {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
        };
        document.getElementById("currentDate").textContent =
          now.toLocaleDateString("en-US", options);
        document.getElementById("date").textContent = now.toLocaleDateString(
          "en-US",
          { month: "long", day: "numeric", year: "numeric" }
        );

        // Update time every minute
        setInterval(updateTime, 60000);
        updateTime();
      });

      function updateTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString("en-US", {
          hour: "2-digit",
          minute: "2-digit",
        });
        document.getElementById("time").textContent = timeString;
      }

      function dateFormat(timestamp) {
        const date = new Date(timestamp * 1000);
        return date.toLocaleString();
      }

      function showLoading() {
        document.getElementById("spinner").style.display = "block";
        document.getElementById("errorMessage").style.display = "none";
      }

      function hideLoading() {
        document.getElementById("spinner").style.display = "none";
      }

      function showError() {
        document.getElementById("errorMessage").style.display = "block";
      }

      async function fetchAQIData(lat, lon) {
        try {
          let response = await fetch(
            `https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=d28274b5fe592e1f1e558103a5e66370`
          );
          if (!response.ok) throw new Error("AQI data unavailable");

          let data = await response.json();
          let list = data.list[0].components;

          $("#no2Value")[0].innerText = list.no2.toFixed(1);
          $("#o3Value")[0].innerText = list.o3.toFixed(1);
          $("#coValue")[0].innerText = list.co.toFixed(1);
          $("#so2Value")[0].innerText = list.so2.toFixed(1);
        } catch (error) {
          console.error("Error fetching AQI data:", error);
          $("#no2Value")[0].innerText = "N/A";
          $("#o3Value")[0].innerText = "N/A";
          $("#coValue")[0].innerText = "N/A";
          $("#so2Value")[0].innerText = "N/A";
        }
      }

      async function nextFiveDays(lat, lon) {
        try {
          const response = await fetch(
            `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=d28274b5fe592e1f1e558103a5e66370&units=metric`
          );
          if (!response.ok) throw new Error("Forecast data unavailable");

          const data = await response.json();
          let dailyForecasts = {};

          // Extract unique daily data
          data.list.forEach((item) => {
            let date = item.dt_txt.split(" ")[0];
            if (!dailyForecasts[date]) {
              dailyForecasts[date] = {
                temp: item.main.temp.toFixed(1),
                icon: item.weather[0].icon,
                day: new Date(date).toLocaleDateString("en-US", {
                  weekday: "long",
                }),
                date: new Date(date).toLocaleDateString("en-US", {
                  month: "short",
                  day: "numeric",
                }),
              };
            }
          });

          // Get first 5 unique days
          let forecastHtml = "";
          Object.keys(dailyForecasts)
            .slice(0, 5)
            .forEach((date) => {
              let forecast = dailyForecasts[date];
              forecastHtml += `
                <div class="forecastRow">
                  <div class="forecast1 d-flex align-items-center">
                    <img src="https://openweathermap.org/img/wn/${forecast.icon}.png" alt="Weather" width="35">
                    <h6 class="m-0">${forecast.temp} &deg;C</h6>
                  </div>
                  <div class="forecast2">
                    <h6 class="m-0">${forecast.day}</h6>
                    <h6 class="m-0">${forecast.date}</h6>
                  </div>
                </div>
              `;
            });

          document.getElementById("forecastContainer").innerHTML = forecastHtml;
        } catch (error) {
          console.error("Error fetching forecast data:", error);
          document.getElementById("forecastContainer").innerHTML =
            '<p class="text-center">Forecast data unavailable</p>';
        }
      }

      async function todayTemps(lat, lon) {
        try {
          const response = await fetch(
            `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=d28274b5fe592e1f1e558103a5e66370&units=metric`
          );
          if (!response.ok) throw new Error("Hourly data unavailable");

          const data = await response.json();
          let now = new Date();
          let todayDate = now.toISOString().split("T")[0];
          let currentHour = now.getHours();

          // Find the closest forecast point to the current hour
          let closestIndex = 0;
          let minDiff = 24;
          for (let i = 0; i < data.list.length; i++) {
            let itemHour = new Date(data.list[i].dt_txt).getHours();
            let itemDate = data.list[i].dt_txt.split(" ")[0];
            let diff = Math.abs(
              (itemDate === todayDate ? itemHour : itemHour + 24) - currentHour
            );
            if (diff < minDiff) {
              minDiff = diff;
              closestIndex = i;
            }
          }

          // Collect up to 24 forecast points from the closest to now
          let nextForecasts = data.list.slice(closestIndex, closestIndex + 24);

          let todayHtml = "";
          nextForecasts.forEach((item, idx) => {
            let itemDate = item.dt_txt.split(" ")[0];
            let showDate = "";
            if (itemDate !== todayDate) {
              // Format as e.g. Jun 3
              let d = new Date(item.dt_txt);
              showDate = `<div style='font-size:0.95em;opacity:0.8;margin-bottom:2px;'>${d.toLocaleDateString(
                "en-US",
                { month: "short", day: "numeric" }
              )}</div>`;
            }
            let time = new Date(item.dt_txt).toLocaleTimeString("en-US", {
              hour: "numeric",
              hour12: true,
            });
            let temp = item.main.temp.toFixed(1);
            let icon = item.weather[0].icon;
            todayHtml += `
              <div class="todayTemp">
                ${showDate}
                <h6 class="m-0">${idx === 0 ? "Now" : time}</h6>
                <img src="https://openweathermap.org/img/wn/${icon}.png" alt="Weather" width="50">
                <h5>${temp}&deg;C</h5>
              </div>
            `;
          });

          document.getElementById("todayTempContainer").innerHTML = todayHtml;
        } catch (error) {
          console.error("Error fetching hourly data:", error);
          document.getElementById("todayTempContainer").innerHTML =
            '<p class="text-center">Hourly data unavailable</p>';
        }
      }

      async function fetchData() {
        const cityInput = document.getElementById("cityInput");
        let cityName = cityInput.value.trim();

        if (!cityName) {
          cityInput.focus();
          return;
        }

        showLoading();

        try {
          let response = await fetch(
            `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=d28274b5fe592e1f1e558103a5e66370&units=metric`
          );

          if (!response.ok) {
            throw new Error("City not found");
          }

          let data = await response.json();
          console.log("Weather Data: ", data);

          // Update main weather info
          $("#cityName").text(data.name);
          $("#cityTemp").text(data.main.temp.toFixed(1));
          $("#skyDesc").text(data.weather[0].description);

          // Update weather icon
          const iconCode = data.weather[0].icon;
          $("#weatherIcon").attr(
            "src",
            `https://openweathermap.org/img/wn/${iconCode}@2x.png`
          );

          // Update metrics
          $("#humidity").text(`${data.main.humidity}%`);
          $("#pressure").text(`${data.main.pressure} hPa`);
          $("#feelsLike").text(`${data.main.feels_like.toFixed(1)} °C`);
          $("#visiblity").text(`${(data.visibility / 1000).toFixed(1)} km`);

          // Update date and time
          let properDate = dateFormat(data.dt);
          let date = properDate.split(",")[0];
          let time = properDate.split(",")[1]
            ? properDate.split(",")[1].trim()
            : "";
          $("#date").text(date);
          $("#time").text(time);

          // Update sunrise and sunset
          let sunrise = new Date(data.sys.sunrise * 1000);
          let sunset = new Date(data.sys.sunset * 1000);
          $("#sunriseTime")[0].innerText = sunrise.toLocaleTimeString("en-US", {
            hour: "numeric",
            minute: "2-digit",
          });
          $("#sunsetTime")[0].innerText = sunset.toLocaleTimeString("en-US", {
            hour: "numeric",
            minute: "2-digit",
          });

          // Fetch additional data
          let lat = data.coord.lat;
          let lon = data.coord.lon;
          await Promise.all([
            fetchAQIData(lat, lon),
            nextFiveDays(lat, lon),
            todayTemps(lat, lon),
          ]);

          hideLoading();
          showError(false);
        } catch (error) {
          console.error("Error fetching weather data:", error);
          hideLoading();
          showError();
          return;
        }

        // After updating all weather data, ensure responsive layout refresh
        // Remove any fixed heights that may cause overflow or layout issues
        $(".mainContentParentDiv").css({
          height: "",
          minHeight: "",
          maxHeight: "",
        });
        $(".leftDiv").css({ height: "", minHeight: "", maxHeight: "" });
        $(".rightDiv").css({ height: "", minHeight: "", maxHeight: "" });
        $(".currentTempDiv").css({ height: "", minHeight: "", maxHeight: "" });
        $(".nextFiveDays").css({ height: "", minHeight: "", maxHeight: "" });
        // Optionally, trigger a window resize event to force reflow
        window.dispatchEvent(new Event("resize"));
        // Hide error message if data loaded successfully
        $("#errorMessage").hide();
      }

      // Enable search on Enter key
      document
        .getElementById("cityInput")
        .addEventListener("keyup", function (event) {
          if (event.key === "Enter") {
            fetchData();
          }
        });
    </script>
  </body>
</html>
